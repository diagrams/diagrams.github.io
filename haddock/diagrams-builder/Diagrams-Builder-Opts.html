<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagrams.Builder.Opts</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagrams-Builder-Opts.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Diagrams-Builder-Opts.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-builder-0.8.0.1: hint-based build service for the diagrams graphics EDSL.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) 2013 diagrams-lib team (see LICENSE)</td></tr><tr><th>License</th><td>BSD-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Diagrams.Builder.Opts</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Options</a></li><li><a href="#g:2">Rebuilding</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Options for dynamic creation of diagrams.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Hash">Hash</a> = <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:BuildOpts">BuildOpts</a> b v n = <a href="#v:BuildOpts">BuildOpts</a> {<ul class="subs"><li><a href="#v:backendToken">backendToken</a> :: b</li><li><a href="#v:vectorToken">vectorToken</a> :: v n</li><li><a href="#v:_backendOpts">_backendOpts</a> :: <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n</li><li><a href="#v:_snippets">_snippets</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_pragmas">_pragmas</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_imports">_imports</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_qimports">_qimports</a> :: [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)]</li><li><a href="#v:_decideRegen">_decideRegen</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n))</li><li><a href="#v:_diaExpr">_diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_postProcess">_postProcess</a> :: <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a> -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a></li></ul>}</li><li class="src short"><a href="#v:mkBuildOpts">mkBuildOpts</a> :: b -&gt; v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n</li><li class="src short"><a href="#v:backendOpts">backendOpts</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n)</li><li class="src short"><a href="#v:snippets">snippets</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:pragmas">pragmas</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:imports">imports</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:qimports">qimports</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)]</li><li class="src short"><a href="#v:decideRegen">decideRegen</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n)))</li><li class="src short"><a href="#v:diaExpr">diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:postProcess">postProcess</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a> -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a>)</li><li class="src short"><a href="#v:alwaysRegenerate">alwaysRegenerate</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</li><li class="src short"><a href="#v:hashedRegenerate">hashedRegenerate</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; a -&gt; a) -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</li><li class="src short"><a href="#v:hashToHexStr">hashToHexStr</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li></ul></div><div id="interface"><h1 id="g:1">Options</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Hash" class="def">Hash</a> = <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a> <a href="src/Diagrams-Builder-Opts.html#Hash" class="link">Source</a> <a href="#t:Hash" class="selflink">#</a></p><div class="doc"><p>Synonym for more perspicuous types.</p><p>We use <code>Int</code> values for hashes because that's what the <code>Hashable</code>
   package uses.  Assuming diagram hashes are uniformly distributed,
   on a 64-bit system one needs to build on the order of billions of
   diagrams before the probability of a hash collision exceeds 1/2,
   and for anything up to tens of millions of diagrams the
   probability of a collision is under 0.1%.  On 32-bit systems
   those become tens of thousands and thousands, respectively.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BuildOpts" class="def">BuildOpts</a> b v n <a href="src/Diagrams-Builder-Opts.html#BuildOpts" class="link">Source</a> <a href="#t:BuildOpts" class="selflink">#</a></p><div class="doc"><p>Options to control the behavior of <code>buildDiagram</code>.  Create one
   with <code><a href="Diagrams-Builder-Opts.html#v:mkBuildOpts">mkBuildOpts</a></code> followed by using the provided lenses to
   override more fields; for example,</p><pre>  mkBuildOpts SVG zeroV (Options ...)
    &amp; imports .~ [&quot;Foo.Bar&quot;, &quot;Baz.Quux&quot;]
    &amp; diaExpr .~ &quot;square 6 # fc green&quot;
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BuildOpts" class="def">BuildOpts</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:backendToken" class="def">backendToken</a> :: b</dfn><div class="doc"><p>Backend token</p></div></li><li><dfn class="src"><a id="v:vectorToken" class="def">vectorToken</a> :: v n</dfn><div class="doc"><p>Dummy vector argument to fix the vector space type</p></div></li><li><dfn class="src"><a id="v:_backendOpts" class="def">_backendOpts</a> :: <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_snippets" class="def">_snippets</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_pragmas" class="def">_pragmas</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_imports" class="def">_imports</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_qimports" class="def">_qimports</a> :: [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_decideRegen" class="def">_decideRegen</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_diaExpr" class="def">_diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_postProcess" class="def">_postProcess</a> :: <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a> -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkBuildOpts" class="def">mkBuildOpts</a> :: b -&gt; v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n <a href="src/Diagrams-Builder-Opts.html#mkBuildOpts" class="link">Source</a> <a href="#v:mkBuildOpts" class="selflink">#</a></p><div class="doc"><p>Create a <code>BuildOpts</code> record with default options:</p><ul><li>no snippets</li><li>no pragmas</li><li>no imports</li><li>always regenerate</li><li>the diagram expression <code>circle 1</code></li><li>no postprocessing</li></ul></div></div><div class="top"><p class="src"><a id="v:backendOpts" class="def">backendOpts</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n) <a href="src/Diagrams-Builder-Opts.html#backendOpts" class="link">Source</a> <a href="#v:backendOpts" class="selflink">#</a></p><div class="doc"><p>Backend-specific options to use.</p></div></div><div class="top"><p class="src"><a id="v:snippets" class="def">snippets</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="src/Diagrams-Builder-Opts.html#snippets" class="link">Source</a> <a href="#v:snippets" class="selflink">#</a></p><div class="doc"><p>Source code snippets.  Each should be a syntactically valid
   Haskell module.  They will be combined intelligently, <em>i.e.</em>
   not just pasted together textually but combining pragmas,
   imports, <em>etc.</em> separately.</p></div></div><div class="top"><p class="src"><a id="v:pragmas" class="def">pragmas</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="src/Diagrams-Builder-Opts.html#pragmas" class="link">Source</a> <a href="#v:pragmas" class="selflink">#</a></p><div class="doc"><p>Extra <code>LANGUAGE</code> pragmas to use (<code>NoMonomorphismRestriction</code>
   is automatically enabled.)</p></div></div><div class="top"><p class="src"><a id="v:imports" class="def">imports</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="src/Diagrams-Builder-Opts.html#imports" class="link">Source</a> <a href="#v:imports" class="selflink">#</a></p><div class="doc"><p>Additional module imports (note that <a href="../diagrams-lib/Diagrams-Prelude.html">Diagrams.Prelude</a> is
   automatically imported).</p></div></div><div class="top"><p class="src"><a id="v:qimports" class="def">qimports</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)] <a href="src/Diagrams-Builder-Opts.html#qimports" class="link">Source</a> <a href="#v:qimports" class="selflink">#</a></p><div class="doc"><p>Additional qualified module imports (module name, qualified
   name).</p></div></div><div class="top"><p class="src"><a id="v:decideRegen" class="def">decideRegen</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:Options">Options</a> b v n))) <a href="src/Diagrams-Builder-Opts.html#decideRegen" class="link">Source</a> <a href="#v:decideRegen" class="selflink">#</a></p><div class="doc"><p>A function to decide whether a particular diagram needs to be
   regenerated.  It will be passed a hash of the final assembled
   source for the diagram (but with the module name set to <code>Main</code>
   instead of something auto-generated, so that hashing the source
   will produce consistent results across runs), plus any options,
   local imports, and other things which could affect the result of
   rendering. It can return some information (such as a hash of the
   source) via the <code>x</code> result, which will be passed through to the
   result of <code>buildDiagram</code>.  More importantly, it decides whether
   the diagram should be built: a result of <code><a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#v:Just">Just</a></code> means the diagram
   <em>should</em> be built; <code><a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#v:Nothing">Nothing</a></code> means it should not. In the case
   that it should be built, it returns a function for updating the
   rendering options.  This could be used, <em>e.g.</em>, to request a
   filename based on a hash of the source.</p><p>Two standard decision functions are provided for
   convenience: <code><a href="Diagrams-Builder-Opts.html#v:alwaysRegenerate">alwaysRegenerate</a></code> returns no extra information
   and always decides to regenerate the diagram;
   <code><a href="Diagrams-Builder-Opts.html#v:hashedRegenerate">hashedRegenerate</a></code> creates a hash of the diagram source and
   looks for a file with that name in a given directory.</p></div></div><div class="top"><p class="src"><a id="v:diaExpr" class="def">diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Builder-Opts.html#diaExpr" class="link">Source</a> <a href="#v:diaExpr" class="selflink">#</a></p><div class="doc"><p>The diagram expression to interpret.  All the given import sand
   snippets will be in scope, with the given LANGUAGE pragmas
   enabled.  The expression may have either of the types <code>Diagram b</code>
   or <code>IO (Diagram b)</code>.</p></div></div><div class="top"><p class="src"><a id="v:postProcess" class="def">postProcess</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder-Opts.html#t:BuildOpts">BuildOpts</a> b v n) (<a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a> -&gt; <a href="../diagrams-core/Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b v n <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Monoid.html#t:Any">Any</a>) <a href="src/Diagrams-Builder-Opts.html#postProcess" class="link">Source</a> <a href="#v:postProcess" class="selflink">#</a></p><div class="doc"><p>A function to apply to the interpreted diagram prior to
   rendering.  For example, you might wish to apply <code>pad 1.1
   . centerXY</code>.  This is preferred over directly modifying the
   string expression to be interpreted, since it gives better
   typechecking, and works no matter whether the expression
   represents a diagram or an IO action.</p></div></div><h1 id="g:2">Rebuilding</h1><div class="top"><p class="src"><a id="v:alwaysRegenerate" class="def">alwaysRegenerate</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a)) <a href="src/Diagrams-Builder-Opts.html#alwaysRegenerate" class="link">Source</a> <a href="#v:alwaysRegenerate" class="selflink">#</a></p><div class="doc"><p>Convenience function suitable to be given as the final argument
   to <code>buildDiagram</code>.  It implements the simple policy of always
   rebuilding every diagram.</p></div></div><div class="top"><p class="src"><a id="v:hashedRegenerate" class="def">hashedRegenerate</a> <a href="src/Diagrams-Builder-Opts.html#hashedRegenerate" class="link">Source</a> <a href="#v:hashedRegenerate" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; a -&gt; a)</td><td class="doc"><p>A function for computing an update to rendering options,
   given a new base filename computed from a hash of the
   diagram source.</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>The directory in which to look for generated files</p></td></tr><tr><td class="src">-&gt; <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a></td><td class="doc"><p>The hash</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Convenience function suitable to be given as the final argument
   to <code>buildDiagram</code>.  It works by converting the hash value to a
   zero-padded hexadecimal string and looking in the specified
   directory for any file whose base name is equal to the hash.  If
   there is such a file, it specifies that the diagram should not be
   rebuilt.  Otherwise, it specifies that the diagram should be
   rebuilt, and uses the provided function to update the rendering
   options based on the generated hash string.  (Most likely, one
   would want to set the requested output file to the hash followed
   by some extension.)</p></div></div><div class="top"><p class="src"><a id="v:hashToHexStr" class="def">hashToHexStr</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Builder-Opts.html#hashToHexStr" class="link">Source</a> <a href="#v:hashToHexStr" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>