<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagrams.Haddock</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagrams-Haddock.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Diagrams-Haddock.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-haddock-0.4.0.1: Preprocessor for embedding diagrams in Haddock documentation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) 2013 diagrams-haddock team (see LICENSE)</td></tr><tr><th>License</th><td>BSD-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Diagrams.Haddock</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Diagram URLs</a></li><li><a href="#g:2">Comments</a></li><li><a href="#g:3">Code blocks</a></li><li><a href="#g:4">Diagram compilation</a></li><li><a href="#g:5">Utilities</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Include inline diagrams code in Haddock documentation!  For
 example, here is a green circle:</p><p><img src="diagrams/src_Diagrams_Haddock_greenCircle.svg#diagram=greenCircle&amp;width=200" /></p><p>which was literally produced by this code:</p><pre>greenCircle = circle 1
            # fc green # pad 1.1</pre><p>For a much better example of the use of diagrams-haddock, see the
 diagrams-contrib package: <a href="http://hackage.haskell.org/package/diagrams%2Dcontrib">http://hackage.haskell.org/package/diagrams%2Dcontrib</a>.</p><p>For complete documentation and examples, see
 <a href="https://github.com/diagrams/diagrams-haddock/blob/master/README.md">https://github.com/diagrams/diagrams-haddock/blob/master/README.md</a>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:DiagramURL">DiagramURL</a> = <a href="#v:DiagramURL">DiagramURL</a> {<ul class="subs"><li><a href="#v:_diagramURL">_diagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_diagramName">_diagramName</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_diagramOpts">_diagramOpts</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Map-Strict.html#t:Map">Map</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li></ul>}</li><li class="src short"><a href="#v:displayDiagramURL">displayDiagramURL</a> :: <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:parseDiagramURL">parseDiagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a></li><li class="src short"><a href="#v:parseKeyValPair">parseKeyValPair</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:maybeParseDiagramURL">maybeParseDiagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Char.html#t:Char">Char</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>)</li><li class="src short"><a href="#v:parseDiagramURLs">parseDiagramURLs</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>]</li><li class="src short"><a href="#v:displayDiagramURLs">displayDiagramURLs</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:getDiagramNames">getDiagramNames</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Comments.html#t:Comment">Comment</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:coalesceComments">coalesceComments</a> :: [<a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Comments.html#t:Comment">Comment</a>] -&gt; [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:CodeBlock">CodeBlock</a> = <a href="#v:CodeBlock">CodeBlock</a> {<ul class="subs"><li><a href="#v:_codeBlockCode">_codeBlockCode</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_codeBlockIdents">_codeBlockIdents</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_codeBlockBindings">_codeBlockBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li></ul>}</li><li class="src short"><a href="#v:codeBlockCode">codeBlockCode</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:codeBlockIdents">codeBlockIdents</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> (<a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:codeBlockBindings">codeBlockBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> (<a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:makeCodeBlock">makeCodeBlock</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>)</li><li class="src short"><a href="#v:collectBindings">collectBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Syntax.html#t:Module">Module</a> l -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:extractCodeBlocks">extractCodeBlocks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>]</li><li class="src short"><a href="#v:parseCodeBlocks">parseCodeBlocks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>], <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>))</li><li class="src short"><a href="#v:transitiveClosure">transitiveClosure</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>]</li><li class="src short"><a href="#v:compileDiagram">compileDiagram</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] -&gt; <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a>)</li><li class="src short"><a href="#v:compileDiagrams">compileDiagrams</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] -&gt; [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> ([<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>], <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a>)</li><li class="src short"><a href="#v:processHaddockDiagrams">processHaddockDiagrams</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:processHaddockDiagrams-39-">processHaddockDiagrams'</a> :: <a href="http://hackage.haskell.org/packages/archive/cpphs/1.20.2/doc/html/Language-Preprocessor-Cpphs.html#t:CpphsOptions">CpphsOptions</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:showParseFailure">showParseFailure</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-SrcLoc.html#t:SrcLoc">SrcLoc</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:CollectErrors">CollectErrors</a> a = <a href="#v:CE">CE</a> {<ul class="subs"><li><a href="#v:unCE">unCE</a> :: <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:Writer">Writer</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] a</li></ul>}</li><li class="src short"><a href="#v:failWith">failWith</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:runCE">runCE</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; (a, [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>])</li></ul></div><div id="interface"><h1 id="g:1">Diagram URLs</h1><div class="doc"><p>Haddock supports inline links to images with the syntax
 <code>&lt;&lt;URL&gt;&gt;</code>.  To indicate an image which should be automatically
 generated from some diagrams code, we use the special syntax
 <code>&lt;&lt;URL#diagram=name&amp;key1=val1&amp;key2=val2&amp;...&gt;&gt;</code>.  The point is
 that everything following the <code>#</code> will be ignored by browsers, but
 we can use it to indicate to diagrams-haddock the name of the
 diagram to be rendered along with options such as size.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DiagramURL" class="def">DiagramURL</a> <a href="src/Diagrams-Haddock.html#DiagramURL" class="link">Source</a> <a href="#t:DiagramURL" class="selflink">#</a></p><div class="doc"><p>An abstract representation of inline Haddock image URLs with
   diagrams tags, like <code>&lt;&lt;URL#diagram=name&amp;width=100&gt;&gt;</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DiagramURL" class="def">DiagramURL</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_diagramURL" class="def">_diagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_diagramName" class="def">_diagramName</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_diagramOpts" class="def">_diagramOpts</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Map-Strict.html#t:Map">Map</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:DiagramURL" class="caption collapser" onclick="toggleSection('i:DiagramURL')">Instances</p><div id="section.i:DiagramURL" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DiagramURL:Eq:1" class="instance expander" onclick="toggleSection('i:id:DiagramURL:Eq:1')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a></span> <a href="src/Diagrams-Haddock.html#line-161" class="link">Source</a> <a href="#t:DiagramURL" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DiagramURL:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DiagramURL:Show:2" class="instance expander" onclick="toggleSection('i:id:DiagramURL:Show:2')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:Show">Show</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a></span> <a href="src/Diagrams-Haddock.html#line-161" class="link">Source</a> <a href="#t:DiagramURL" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DiagramURL:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:displayDiagramURL" class="def">displayDiagramURL</a> :: <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#displayDiagramURL" class="link">Source</a> <a href="#v:displayDiagramURL" class="selflink">#</a></p><div class="doc"><p>Display a diagram URL in the format <code>&lt;&lt;URL#diagram=name&amp;key=val&amp;...&gt;&gt;</code>.</p></div></div><div class="top"><p class="src"><a id="v:parseDiagramURL" class="def">parseDiagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a> <a href="src/Diagrams-Haddock.html#parseDiagramURL" class="link">Source</a> <a href="#v:parseDiagramURL" class="selflink">#</a></p><div class="doc"><p>Parse things of the form <code>&lt;&lt;URL#diagram=name&amp;key=val&amp;...&gt;&gt;</code>.
   The URL is optional (the <code>#</code>, however, is required).</p></div></div><div class="top"><p class="src"><a id="v:parseKeyValPair" class="def">parseKeyValPair</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>) <a href="src/Diagrams-Haddock.html#parseKeyValPair" class="link">Source</a> <a href="#v:parseKeyValPair" class="selflink">#</a></p><div class="doc"><p>Parse a key/value pair of the form <code>&amp;key=val</code>.</p></div></div><div class="top"><p class="src"><a id="v:maybeParseDiagramURL" class="def">maybeParseDiagramURL</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Char.html#t:Char">Char</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>) <a href="src/Diagrams-Haddock.html#maybeParseDiagramURL" class="link">Source</a> <a href="#v:maybeParseDiagramURL" class="selflink">#</a></p><div class="doc"><p>Parse a diagram URL <em>or</em> a single character which is not the
   start of a diagram URL.</p></div></div><div class="top"><p class="src"><a id="v:parseDiagramURLs" class="def">parseDiagramURLs</a> :: <a href="http://hackage.haskell.org/packages/archive/parsec/3.1.11/doc/html/Text-Parsec-String.html#t:Parser">Parser</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>] <a href="src/Diagrams-Haddock.html#parseDiagramURLs" class="link">Source</a> <a href="#v:parseDiagramURLs" class="selflink">#</a></p><div class="doc"><p>Decompose a string into a parsed form with explicitly represented
   diagram URLs interspersed with other content.</p></div></div><div class="top"><p class="src"><a id="v:displayDiagramURLs" class="def">displayDiagramURLs</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#displayDiagramURLs" class="link">Source</a> <a href="#v:displayDiagramURLs" class="selflink">#</a></p><div class="doc"><p>Serialize a parsed comment with diagram URLs back into a String.</p></div></div><h1 id="g:2">Comments</h1><div class="doc"><p>A few miscellaneous functions for dealing with comments.</p></div><div class="top"><p class="src"><a id="v:getDiagramNames" class="def">getDiagramNames</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Comments.html#t:Comment">Comment</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#getDiagramNames" class="link">Source</a> <a href="#v:getDiagramNames" class="selflink">#</a></p><div class="doc"><p>Get the names of all diagrams referenced from diagram URLs in the
   given comment.</p></div></div><div class="top"><p class="src"><a id="v:coalesceComments" class="def">coalesceComments</a> :: [<a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Comments.html#t:Comment">Comment</a>] -&gt; [(<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>)] <a href="src/Diagrams-Haddock.html#coalesceComments" class="link">Source</a> <a href="#v:coalesceComments" class="selflink">#</a></p><div class="doc"><p>Given a series of comments, return a list of their contents,
   coalescing blocks of adjacent single-line comments into one
   String.  Each string will be paired with the number of the line
   on which it begins.</p></div></div><h1 id="g:3">Code blocks</h1><div class="doc"><p>A code block represents some portion of a comment set off by bird
 tracks.  We also collect a list of the names bound in each code
 block, in order to decide which code blocks contain expressions
 representing diagrams that are to be rendered.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CodeBlock" class="def">CodeBlock</a> <a href="src/Diagrams-Haddock.html#CodeBlock" class="link">Source</a> <a href="#t:CodeBlock" class="selflink">#</a></p><div class="doc"><p>A <code>CodeBlock</code> represents a portion of a comment which is a valid
   code block (set off by &gt; bird tracks).  It also caches the list
   of bindings present in the code block.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CodeBlock" class="def">CodeBlock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_codeBlockCode" class="def">_codeBlockCode</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_codeBlockIdents" class="def">_codeBlockIdents</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:_codeBlockBindings" class="def">_codeBlockBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:CodeBlock" class="caption collapser" onclick="toggleSection('i:CodeBlock')">Instances</p><div id="section.i:CodeBlock" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CodeBlock:Eq:1" class="instance expander" onclick="toggleSection('i:id:CodeBlock:Eq:1')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a></span> <a href="src/Diagrams-Haddock.html#line-283" class="link">Source</a> <a href="#t:CodeBlock" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CodeBlock:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CodeBlock:Show:2" class="instance expander" onclick="toggleSection('i:id:CodeBlock:Show:2')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:Show">Show</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a></span> <a href="src/Diagrams-Haddock.html#line-283" class="link">Source</a> <a href="#t:CodeBlock" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CodeBlock:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:codeBlockCode" class="def">codeBlockCode</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#codeBlockCode" class="link">Source</a> <a href="#v:codeBlockCode" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:codeBlockIdents" class="def">codeBlockIdents</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> (<a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>) <a href="src/Diagrams-Haddock.html#codeBlockIdents" class="link">Source</a> <a href="#v:codeBlockIdents" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:codeBlockBindings" class="def">codeBlockBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/4.15.1/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a> (<a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>) <a href="src/Diagrams-Haddock.html#codeBlockBindings" class="link">Source</a> <a href="#v:codeBlockBindings" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:makeCodeBlock" class="def">makeCodeBlock</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>) <a href="src/Diagrams-Haddock.html#makeCodeBlock" class="link">Source</a> <a href="#v:makeCodeBlock" class="selflink">#</a></p><div class="doc"><p>Given a <code>String</code> representing a code block, <em>i.e.</em> valid Haskell
   code with any bird tracks already stripped off, along with its
   beginning line number (and the name of the file from which it was
   taken), attempt to parse it, extract the list of bindings
   present, and construct a <code><a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a></code> value.</p></div></div><div class="top"><p class="src"><a id="v:collectBindings" class="def">collectBindings</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-Syntax.html#t:Module">Module</a> l -&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#collectBindings" class="link">Source</a> <a href="#v:collectBindings" class="selflink">#</a></p><div class="doc"><p>Collect the list of names bound in a module.</p></div></div><div class="top"><p class="src"><a id="v:extractCodeBlocks" class="def">extractCodeBlocks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] <a href="src/Diagrams-Haddock.html#extractCodeBlocks" class="link">Source</a> <a href="#v:extractCodeBlocks" class="selflink">#</a></p><div class="doc"><p>From a <code>String</code> representing a comment (along with its beginning
   line number, and the name of the file it came from, for error
   reporting purposes), extract all the code blocks (consecutive
   lines beginning with bird tracks), and error messages for code
   blocks that fail to parse.</p></div></div><div class="top"><p class="src"><a id="v:parseCodeBlocks" class="def">parseCodeBlocks</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> ([<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>], <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>)) <a href="src/Diagrams-Haddock.html#parseCodeBlocks" class="link">Source</a> <a href="#v:parseCodeBlocks" class="selflink">#</a></p><div class="doc"><p>Take the contents of a Haskell source file (and the name of the
   file, for error reporting purposes), and extract all the code
   blocks, as well as the referenced diagram names.</p></div></div><div class="top"><p class="src"><a id="v:transitiveClosure" class="def">transitiveClosure</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] -&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>] <a href="src/Diagrams-Haddock.html#transitiveClosure" class="link">Source</a> <a href="#v:transitiveClosure" class="selflink">#</a></p><div class="doc"><p>Given an identifier and a list of CodeBlocks, filter the list of
   CodeBlocks to the transitive closure of the &quot;depends-on&quot;
   relation, <em>i.e.</em> only blocks which bind identifiers referenced in
   blocks ultimately needed by the block which defines the desired
   identifier.</p></div></div><h1 id="g:4">Diagram compilation</h1><div class="doc"><p>This section contains all the functions which actually interface
 with diagrams-builder in order to compile diagrams referenced from
 URLs.</p></div><div class="top"><p class="src"><a id="v:compileDiagram" class="def">compileDiagram</a> <a href="src/Diagrams-Haddock.html#compileDiagram" class="link">Source</a> <a href="#v:compileDiagram" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p><code>True</code> = quiet</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p><code>True</code> = generate data URIs</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>cache directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>output directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>file being processed</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></td><td class="doc"><p>diagrams referenced from URLs</p></td></tr><tr><td class="src">-&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> (<a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a directory for cached diagrams and a directory for
   outputting final diagrams, and all the relevant code blocks,
   compile the diagram referenced by a single URL, returning a new
   URL updated to point to the location of the generated diagram.
   Also return a <code>Bool</code> indicating whether the URL changed.</p><p>In particular, the diagram will be output to <code>outDir/name.svg</code>,
   where <code>outDir</code> is the second argument to <code>compileDiagram</code>, and
   <code>name</code> is the name of the diagram.  The updated URL will also
   refer to <code>outDir/name.svg</code>, under the assumption that <code>outDir</code>
   will be copied into the Haddock output directory. (For
   information on how to make this copying happen, see the README:
   <a href="https://github.com/diagrams/diagrams-haddock/blob/master/README.md">https://github.com/diagrams/diagrams-haddock/blob/master/README.md</a>.)
   If for some reason you would like this scheme to be more
   flexible/configurable, feel free to file a feature request.</p></div></div><div class="top"><p class="src"><a id="v:compileDiagrams" class="def">compileDiagrams</a> <a href="src/Diagrams-Haddock.html#compileDiagrams" class="link">Source</a> <a href="#v:compileDiagrams" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p><code>True</code> = quiet</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p><code>True</code> = generate data URIs</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>cache directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>output directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>file being processed</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/containers/0.5.7.1/doc/html/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a></td><td class="doc"><p>diagram names referenced from URLs</p></td></tr><tr><td class="src">-&gt; [<a href="Diagrams-Haddock.html#t:CodeBlock">CodeBlock</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> ([<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Either.html#t:Either">Either</a> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="Diagrams-Haddock.html#t:DiagramURL">DiagramURL</a>], <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Compile all the diagrams referenced in an entire module.</p></div></div><div class="top"><p class="src"><a id="v:processHaddockDiagrams" class="def">processHaddockDiagrams</a> <a href="src/Diagrams-Haddock.html#processHaddockDiagrams" class="link">Source</a> <a href="#v:processHaddockDiagrams" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>quiet</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>generate data URIs?</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>cache directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>output directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>file to be processed</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read a file, compile all the referenced diagrams, and update all
   the diagram URLs to refer to the proper image files.  Note, this
   <em>overwrites</em> the file, so it's recommended to only do this on
   files that are under version control, so you can compare the two
   versions and roll back if <code><a href="Diagrams-Haddock.html#v:processHaddockDiagrams">processHaddockDiagrams</a></code> does something
   horrible.</p><p>Returns a list of warnings and/or errors.</p></div></div><div class="top"><p class="src"><a id="v:processHaddockDiagrams-39-" class="def">processHaddockDiagrams'</a> <a href="src/Diagrams-Haddock.html#processHaddockDiagrams%27" class="link">Source</a> <a href="#v:processHaddockDiagrams-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/packages/archive/cpphs/1.20.2/doc/html/Language-Preprocessor-Cpphs.html#t:CpphsOptions">CpphsOptions</a></td><td class="doc"><p>Options for cpphs</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>quiet</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>generate data URIs?</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>cache directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>output directory</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>file to be processed</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/System-IO.html#t:IO">IO</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Version of <code><a href="Diagrams-Haddock.html#v:processHaddockDiagrams">processHaddockDiagrams</a></code> that takes options for <code>cpphs</code>.</p></div></div><h1 id="g:5">Utilities</h1><div class="top"><p class="src"><a id="v:showParseFailure" class="def">showParseFailure</a> :: <a href="http://hackage.haskell.org/packages/archive/haskell-src-exts/1.19.0/doc/html/Language-Haskell-Exts-SrcLoc.html#t:SrcLoc">SrcLoc</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> <a href="src/Diagrams-Haddock.html#showParseFailure" class="link">Source</a> <a href="#v:showParseFailure" class="selflink">#</a></p><div class="doc"><p>Pretty-print a parse failure at a particular location.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:CollectErrors" class="def">CollectErrors</a> a <a href="src/Diagrams-Haddock.html#CollectErrors" class="link">Source</a> <a href="#t:CollectErrors" class="selflink">#</a></p><div class="doc"><p>A simple monad for collecting a list of error messages.  There is
   no facility for failing as such---in this model one simply
   generates an error message and moves on.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CE" class="def">CE</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unCE" class="def">unCE</a> :: <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Lazy.html#t:Writer">Writer</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:CollectErrors" class="caption collapser" onclick="toggleSection('i:CollectErrors')">Instances</p><div id="section.i:CollectErrors" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CollectErrors:Monad:1" class="instance expander" onclick="toggleSection('i:id:CollectErrors:Monad:1')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Control-Monad.html#t:Monad">Monad</a> <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a></span> <a href="src/Diagrams-Haddock.html#line-130" class="link">Source</a> <a href="#t:CollectErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CollectErrors:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; (a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:return" class="selflink">#</a></p><p class="src"><a href="#v:fail">fail</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CollectErrors:Functor:2" class="instance expander" onclick="toggleSection('i:id:CollectErrors:Functor:2')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Functor.html#t:Functor">Functor</a> <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a></span> <a href="src/Diagrams-Haddock.html#line-130" class="link">Source</a> <a href="#t:CollectErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CollectErrors:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CollectErrors:Applicative:3" class="instance expander" onclick="toggleSection('i:id:CollectErrors:Applicative:3')"></span> <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a></span> <a href="src/Diagrams-Haddock.html#line-130" class="link">Source</a> <a href="#t:CollectErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CollectErrors:Applicative:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (a -&gt; b) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> b -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CollectErrors:MonadWriter:4" class="instance expander" onclick="toggleSection('i:id:CollectErrors:MonadWriter:4')"></span> <a href="http://hackage.haskell.org/packages/archive/mtl/2.2.1/doc/html/Control-Monad-Writer-Class.html#t:MonadWriter">MonadWriter</a> [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a></span> <a href="src/Diagrams-Haddock.html#line-130" class="link">Source</a> <a href="#t:CollectErrors" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CollectErrors:MonadWriter:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:writer">writer</a> :: (a, [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:writer" class="selflink">#</a></p><p class="src"><a href="#v:tell">tell</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> () <a href="#v:tell" class="selflink">#</a></p><p class="src"><a href="#v:listen">listen</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (a, [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]) <a href="#v:listen" class="selflink">#</a></p><p class="src"><a href="#v:pass">pass</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (a, [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>] -&gt; [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]) -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a <a href="#v:pass" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:failWith" class="def">failWith</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a> -&gt; <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="src/Diagrams-Haddock.html#failWith" class="link">Source</a> <a href="#v:failWith" class="selflink">#</a></p><div class="doc"><p>Generate an error message and fail (by returning <code>Nothing</code>).</p></div></div><div class="top"><p class="src"><a id="v:runCE" class="def">runCE</a> :: <a href="Diagrams-Haddock.html#t:CollectErrors">CollectErrors</a> a -&gt; (a, [<a href="http://hackage.haskell.org/packages/archive/base/4.9.0.0/doc/html/Data-String.html#t:String">String</a>]) <a href="src/Diagrams-Haddock.html#runCE" class="link">Source</a> <a href="#v:runCE" class="selflink">#</a></p><div class="doc"><p>Run a <code>CollectErrors</code> computation, resulting in a value of type
   <code>a</code> along with the collection of generated error messages.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>